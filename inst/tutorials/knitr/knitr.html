<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<meta name="progressive" content="true" />
<meta name="allow-skip" content="false" />

<title>Generating dynamic reports with knitr</title>


<!-- highlightjs -->
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>

<!-- taken from https://github.com/rstudio/rmarkdown/blob/67b7f5fc779e4cfdfd0f021d3d7745b6b6e17149/inst/rmd/h/default.html#L296-L362 -->
<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>
<!-- end tabsets -->


<link rel="stylesheet" href="css/tutorials.css" type="text/css" />

</head>

<body>



<div class="pageContent band">
<div class="bandContent page">

<div class="topics">

<p><img src="images/UNSW_2017_Big_Data_landscape.jpg" style="width:75.0%" /></p>
<div id="section-overview" class="section level2">
<h2>Overview</h2>
<p>This tutorial looks at <em>Literate Programming</em> using the <em>knitr</em> package for <span class="math inline">\(\textsf{R}\)</span>.</p>
<p><em>Knitr</em> lets us write documents which are both</p>
<ul>
<li>programmes — they can perform calculations and analyses</li>
<li>reports or scientific papers — they can be something readable by humans</li>
</ul>
<p>Mixing the two together means we finish one when we finish the other. No more getting to the end of the analysis and then having to face the write up. What we will examine here is a variant of the <a href="https://en.wikipedia.org/wiki/Literate_programming">literate programming</a> paradigm introduced by <a href="https://en.wikipedia.org/wiki/Donald_Knuth">Donald Knuth</a>.</p>
<p>A report that <em>is</em> simultaneously the analysis and a document describing the analysis enables reproducibility and verification</p>
<p><span class="copyright">© Copyright 2022 UNSW Sydney. All rights reserved except where otherwise stated.</span></p>
</div>
<div id="section-literate-programming" class="section level2">
<h2>Literate programming</h2>
<p><a href="http://www.literateprogramming.com/knuthweb.pdf"><em>Literate programming</em></a> is a programming paradigm introduced by Donald Knuth in which a program is given as an explanation of the program logic in a natural language, such as English, interspersed with snippets of macros and traditional source code, from which a compilable source code can be generated.</p>
<p>Here we will be using a variant where a document with the output of the executed code embedded in it is produced as the final artefact rather than a computer programme.</p>
<p>Knuth said:</p>
<blockquote>
<p>“I had the feeling that top-down and bottom-up were opposing methodologies: one more suitable for program exposition and the other more suitable for program creation. But after gaining experience with WEB, I have come to realize that there is no need to choose once and for all between top-down and bottom-up, because a program is best thought of as a web instead of a tree. A hierarchical structure is present, but the most important thing about a program is its structural relationships. A complex piece of software consists of simple parts and simple relations between those parts; the programmer’s task is to state those parts and those relationships, in whatever order is best for human comprehension not in some rigidly determined order like top-down or bottom-up.”</p>
</blockquote>
<p>In practice this manifests itself as different parts of the task informing and helping the other</p>
<ul>
<li>concentrating on the detail can help define what the larger task is</li>
<li>concentrating on the task as a whole, refining as we go can lead to an understanding of what detail is necessary</li>
</ul>
<p>In a document such as a report</p>
<ul>
<li>writing the code to execute the steps of an analysis can help detect inconsistencies and errors in our explanations</li>
<li>writing explanations for our code can help clarify what we’re trying to do</li>
</ul>
<p>Having these two tasks in close proximity to one another in the document and performed contemporaneously allows them to reinforce and help one another.</p>
<p>Literate programming provides higher-quality programs, since it forces programmers to explicitly state the thoughts behind the program, making poorly thought-out design decisions more obvious. Knuth also claims that literate programming provides a first-rate documentation system, which is not an add-on, but is grown naturally in the process of exposition of one’s thoughts during a program’s creation. [<a href="https://en.wikipedia.org/wiki/Literate_programming#Advantages">Wikipedia</a>]</p>
<p>This approach helps us understand what we’re trying to do and helps others understand what we’re trying to do. Fundamentally it improves the quality of our communication.</p>
<p>In RStudio we will be using <em>knitr</em> to produce our communication artefacts.</p>
<div class="aside">
<h3 id="section-an-aside">An aside…</h3>
<p>Knuth called his first implementation of this idea <em>WEB</em>.</p>
<p>In contained a preprocessor to take the source document and produce the compilable programme on the one hand (<em>tangle</em>) and the human readable documentation on the other (<em>weave</em>).</p>
<p><em>Knitr</em> is a wordplay on <em>weave</em>.</p>
</div>
</div>
<div id="section-knitr" class="section level2">
<h2>Knitr</h2>
<p>RStudio has integrated facilities for editing <a href="https://rmarkdown.rstudio.com/articles_intro.html"><em>Rmarkdown</em></a> (.Rmd) files.</p>
<p><em>Rmarkdown</em> is a variant of <a href="https://en.wikipedia.org/wiki/Markdown"><em>markdown</em></a>, a lighweight text-based markup language <a href="https://daringfireball.net/projects/markdown/">developed by John Gruber for use at daringfireball</a>.</p>
<p><em>Knitr</em> uses <a href="https://pandoc.org/MANUAL.html#pandocs-markdown"><em>pandoc</em></a> to convert the markdown text to other formats.</p>
<div id="section-rstudio" class="section level3">
<h3>RStudio</h3>
<div class="float-right">
<p><img src="images/rstudio_new_markdown_document.png" /></p>
</div>
<p>The <em>File &gt;&gt; New File</em> menu has an option for <em>R markdown…</em></p>
<p>It allows use to choose different output formats:</p>
<ul>
<li>HTML, PDF, Word, LATEX</li>
<li>slides</li>
<li>even interactive documents with shiny apps embedded</li>
</ul>
<p>Choosing some of these formats may require extra R packages or other third-party software to be installed (although generally RStudio handles this automatically for you).</p>
</div>
<div id="section-managing-documents-with-git" class="section level3">
<h3>Managing documents with git</h3>
<p>Rmarkdown files are text files and as such they are ideal for management with <em>git</em>.</p>
<p>Don’t forget to initialise each project with <em>git</em> either on creation or subsequently. If you forgot or are bringing an existing project under revision control RStudio lets you ‘turn on’ <em>git</em> for an existing project using the <em>Tools &gt;&gt; Version Control</em> menu or you can turn it on manually by running <code>git init</code> on the command line in the root folder of a project.</p>
<p>Don’t forget to commit your work regularly as necessary!</p>
</div>
</div>
<div id="section-rmd-files" class="section level2">
<h2>Rmd files</h2>
<p>Whereas an R script contains purely R code, an Rmd file is different.</p>
<p>Parts of the document are (marked up) text for reading by a human.</p>
<p>Parts of the document are R code for excuting by the computer.</p>
<p>The code sections are run, the text sections are formatted and the two are ‘knitted’ together by inserting the output of the code into the formatted text to create the final document.</p>
<p>The final document can be an HTML, PDF or even a Microsoft Word document.</p>
<p>The markup (rmarkdown) is designed to be a simple notation to conveniently indicate things like bold or italic text, or heading and lists. As such it doesn’t do everything but it does most of what is needed.</p>
<p>Because of the choice of output formats, if finer control over the finished document is required it is not uncommon to do a first phase of document preparation in RStudio using <em>knitr</em> and then transfer the produced document to <em>Microsoft Word</em> for further editing. (Note that Word does not play nicely with <em>git</em> and so there are disadvantages to this as well as advantages.)</p>
<p>Here is a sample Rmd file</p>
<pre><code>---
title: &quot;Untitled&quot;
author: &quot;James Farrow&quot;
date: &quot;30/07/2018&quot;
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see &lt;http://rmarkdown.rstudio.com&gt;.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.</code></pre>
<p>The final document looks like this</p>
<div class="centre">
<p><img src="images/knitr_document_output_sample.png" class="bordered" style="width:75.0%" /></p>
</div>
<p>Compare the different parts of the two documents.</p>
</div>
<div id="section-markdown" class="section level2">
<h2>Markdown</h2>
<p>Markdown is quite expressive and can be used to embed things like hyperlinks, images, numbered and unnumbered lists in a document.</p>
<p>See <a href="http://rmarkdown.rstudio.com">http://rmarkdown.rstudio.com</a> for more information.</p>
<div id="section-basic-markup-using-markdown-syntax" class="section level3">
<h3>Basic markup using markdown syntax</h3>
<p>Markdown is plain text with a little bit of notation to control formatting</p>
<ul>
<li><code>*...*</code> or <code>_..._</code> can be used to indicate <em>italic</em></li>
<li><code>**...**</code> or <code>__...__</code> can be used to indicate <strong>bold</strong></li>
<li><code># Title Text</code> can be used to format a heading with the text ‘Title Text’
<ul>
<li>the number of ##’s indicates the heading level, start with 2</li>
<li>the title of the document (from the metadata) is usually rendered automatically as a first level heading</li>
</ul></li>
<li><code>^...^</code> is used to mark up superscript text</li>
<li><code>~~...~~</code> is used to strike through text</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="left">Markup</th>
<th align="left">Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>*italic*</code> or <code>_italic_</code></td>
<td align="left"><em>italic</em></td>
</tr>
<tr class="even">
<td align="left"><code>**bold**</code> or <code>__bold__</code></td>
<td align="left"><strong>bold</strong></td>
</tr>
<tr class="odd">
<td align="left"><code>## Heading</code></td>
<td align="left"><span style="font-size: 150%"><strong>Heading</strong></span></td>
</tr>
<tr class="even">
<td align="left"><code>x^2^</code></td>
<td align="left">x<sup>2</sup></td>
</tr>
<tr class="odd">
<td align="left"><code>~~strike~~</code></td>
<td align="left"><del>strike</del></td>
</tr>
</tbody>
</table>
</div>
<div id="section-lists" class="section level3">
<h3>Lists</h3>
<p>Lists are formatting using <code>*</code> or <code>+</code> for <em>unordered lists</em> (the actual symbol doesn’t matter) and using numerical prefixes for <em>ordered lists.</em> For ordered lists, only the first number at each level matters. Subsequent items at the same level will be sequentially numbered starting with the next integer.</p>
<p>Ordered lists can also be given using alphabetical <code>a.</code> or Roman numerals labelling <code>i.</code>.</p>
<pre><code>  * item
  + item
    * sub item</code></pre>
<p>renders as</p>
<div class="output panel">
<ul>
<li>item</li>
<li>item
<ul>
<li>sub item</li>
</ul></li>
</ul>
</div>
<p>while</p>
<pre><code>  2. first item
  5. second item
     1. first sub item
     9. second sub item
     6. third sub item
  0. third item
     1) first
     1) second
     1) third</code></pre>
<p>renders as</p>
<div class="output panel">
<ol start="2" style="list-style-type: decimal">
<li>first item</li>
<li>second item
<ol style="list-style-type: decimal">
<li>first sub item</li>
<li>second sub item</li>
<li>third sub item</li>
</ol></li>
<li>third item
<ol style="list-style-type: decimal">
<li>first</li>
<li>second</li>
<li>third</li>
</ol></li>
</ol>
</div>
<p>List styles may be mixed</p>
<pre><code>  1. one
  1. two
     i. roman
     i. roman
     i. roman
  1. three.
     * unordered
     * unordered</code></pre>
<div class="output panel">
<ol style="list-style-type: decimal">
<li>one</li>
<li>two
<ol style="list-style-type: lower-roman">
<li>roman</li>
<li>roman</li>
<li>roman</li>
</ol></li>
<li>three.
<ul>
<li>unordered</li>
<li>unordered</li>
</ul></li>
</ol>
</div>
</div>
<div id="section-hyperlinks" class="section level3">
<h3>Hyperlinks</h3>
<p>Hyperlinks are marked up by enclosing the text of the anchor with <code>[...]</code> and following it with the link enclosed in <code>(...)</code>.</p>
<p>The text enclosed by the <code>[...]</code> may be marked up.</p>
<p>Thus, <code>[_Markdown Basics_](https://rmarkdown.rstudio.com/authoring_basics.html)</code> renders as <a href="https://rmarkdown.rstudio.com/authoring_basics.html"><em>Markdown Basics</em></a>.</p>
</div>
<div id="section-images" class="section level3">
<h3>Images</h3>
<p>Images are included using a similar notation to hyperlinks</p>
<pre><code>![image caption text](http://example.com/logo.png)</code></pre>
<p>For files local to a project a file relative URL can be specified</p>
<pre><code>![image caption text](images/logo.png)</code></pre>
<p>So for example in this tutorial</p>
<pre><code>![Figure: _A series of green cogs_](images/84px-Cog-scripted-svg.png)</code></pre>
<p>renders as</p>
<div class="output panel">
<div class="figure">
<img src="images/84px-Cog-scripted-svg.png" alt="" />
<p class="caption">Figure: <em>A series of green cogs</em></p>
</div>
</div>
<div class="aside">
<h3 id="section-an-aside-1">An aside…</h3>
<p>For documents being rendered to HTML, arbitrary HTML can be included in the document.</p>
<p>If we wanted to centre the previous image we could write</p>
<pre><code>&lt;div style=&quot;text-align: center;&quot;&gt;
![Figure: _A series of green cogs_](images/84px-Cog-scripted-svg.png)
&lt;/div&gt;</code></pre>
<p>which would then render as</p>
<div class="output panel">
<div style="text-align: center;">
<div class="figure">
<img src="images/84px-Cog-scripted-svg.png" alt="" />
<p class="caption">Figure: <em>A series of green cogs</em></p>
</div>
</div>
</div>
</div>
</div>
<div id="section-equations" class="section level3">
<h3>Equations</h3>
<p>A substantial subset of LaTeX equations can be used. See <a href="http://www.introductoryr.co.uk/Reproducibility/Chap_6_Maths.html"><em>Adding equations to your document</em></a>.</p>
<p>Inline equations are surrounded by <code>$</code>.</p>
<pre><code>Let $x = \sqrt{a_i^2 - b_j^2}$ as previously.</code></pre>
<p>renders as</p>
<div class="output panel">
<p>Let <span class="math inline">\(x = \sqrt{a_i^2 - b_j^2}\)</span> as previously.</p>
</div>
<p>Block equations are surrounded by <code>$$</code> and get centred on a new line.</p>
<pre><code>$$ \large{ \sigma^2 = \frac { \sum_{i=1}^{n} \left( x_i - \bar{x} \right) ^ 2} {n-1} } $$</code></pre>
<div class="output panel">
<p><span class="math display">\[ \large{ \sigma^2 = \frac { \sum_{i=1}^{n} \left( x_i - \bar{x} \right) ^ 2} {n-1} } \]</span></p>
</div>
</div>
<div id="section-tables" class="section level3">
<h3>Tables</h3>
<p>Simple tables can be rendered in text and will be formatted appropriately. Cells spanning multiple columns and/or rows are not available using this simple format.</p>
<p>The code</p>
<pre><code>| Markup                         | Result                                           |
|:-------------------------------|:-------------------------------------------------|
| `*italic*` or `_italic_`       | _italic_                                         |
| `**bold**` or `__bold__`       | **bold**                                         |
| `## Heading`                   | &lt;span style=&quot;font-size: 150%&quot;&gt;**Heading**&lt;/span&gt; |
| `x^2^`                         | x^2^                                             |
| `~~strike~~`                   | ~~strike~~                                       |</code></pre>
<p>renders as</p>
<div class="output panel">
<table>
<thead>
<tr class="header">
<th align="left">Markup</th>
<th align="left">Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>*italic*</code> or <code>_italic_</code></td>
<td align="left"><em>italic</em></td>
</tr>
<tr class="even">
<td align="left"><code>**bold**</code> or <code>__bold__</code></td>
<td align="left"><strong>bold</strong></td>
</tr>
<tr class="odd">
<td align="left"><code>## Heading</code></td>
<td align="left"><span style="font-size: 150%"><strong>Heading</strong></span></td>
</tr>
<tr class="even">
<td align="left"><code>x^2^</code></td>
<td align="left">x<sup>2</sup></td>
</tr>
<tr class="odd">
<td align="left"><code>~~strike~~</code></td>
<td align="left"><del>strike</del></td>
</tr>
</tbody>
</table>
</div>
<p>and in fact this is the markup from the first section of this document.</p>
<p>These types of tables work well for static information but don’t work at all for dynamic data.</p>
<p>There are better ways of including tables based on data held in, say, data frames manipulated by your program code, as we will see later.</p>
</div>
<div id="section-code-chunks" class="section level3">
<h3>Code chunks</h3>
<p>Code is embedded in a markdown document using <code>`...`</code> for inline code and <code>```...```</code> for blocks of code.</p>
<p>Code is usually rendered in a monospaced font and set in a different color and/or on a different background.</p>
<p>For example</p>
<pre><code>The `master` branch</code></pre>
<p>renders as</p>
<div class="output panel">
<p>The <code>master</code> branch</p>
</div>
<p>while</p>
<pre><code>```
cube &lt;- function(x) {
  x^3
}
```</code></pre>
<p>usually renders in an enclosed panel thus.</p>
<div class="output panel" style="padding: 0; margin-bottom: 0;">
<pre style="border: none; background-color: white; margin-bottom: 0;">
cube <- function(x) {
  x^3
}
</pre>
</div>
<p>The ability to include chunks of static code is useful but literate programming is all about the ability to include chunks of code which are <em>executed</em>.</p>
</div>
</div>
<div id="section-active-code-chunks" class="section level2">
<h2>Active code chunks</h2>
<p>The general format of an active code chunk is</p>
<pre><code>```{r &lt;chunk-name&gt;, &lt;options&gt;}
&lt;programme-code&gt;
```</code></pre>
<p>The <code>r</code> means this is R code and having this text here after the initial <code>```</code> marks it as an active code chunk.</p>
<p>The options control things like whether the source code gets included in the document, whether the code gets run and whether the output from running the code is included in the document.</p>
<p>In RStudio a code chunk has some control on the right hand side of the edit pane.</p>
<div class="centre">
<p><img src="images/code_chunk.png" /></p>
</div>
<div class="float-right">
<p><img src="images/code_chunk_settings.png" style="width:75.0%" /></p>
</div>
<p>The first icon is used to control some of the settings for the chunk.</p>
<p>The second icon runs all code chunk previous to this chunk. This is useful when editing a complex analysis where the setup may take a while to compute. The setup (all previous chunks) can be run once and then this code run multiple times while working on it.</p>
<p>The third icon runs the code in this chunk. If the code follows good practice of not overwriting state but creating new variables, then the code chunk can be run multiple times and have the same result.</p>
<div class="aside">
<h3 id="section-an-aside-2">An aside…</h3>
<p>We call code that can be run multiple times giving the same result <em>idempotent</em>.</p>
<p>The code</p>
<pre><code>n &lt;- n + 1</code></pre>
<p>is not idempotent. Because it modifies one of its inputs the value of <code>n</code> will increase every time the code chunk is run.</p>
<p>The code</p>
<pre><code>m &lt;- n + 1</code></pre>
<p>is idempotent because it does not modify its inputs. Every time it is run <code>m</code> will have the same value.</p>
</div>
<div id="section-setting-up" class="section level3">
<h3>Setting up</h3>
<p>The first chunk is usually a special chunk to set things up and is usually called something like ‘setup’)</p>
<pre><code>```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```</code></pre>
<p>The <code>include=FALSE</code> option says ‘don’t include this chunk in the final document’.</p>
<p>The code inside the chunk sets the <code>echo</code> option default for all knitr chunks processed by <em>knitr</em> to be <code>TRUE</code> meaning by default all chunks will have their output placed into the document.</p>
<p>This saves us from putting <code>echo=TRUE</code> as an option on every chunk</p>
</div>
<div id="section-inline-textsfr-code" class="section level3">
<h3>Inline <span class="math inline">\(\textsf{R}\)</span> code</h3>
<p>You can also include the results of <span class="math inline">\(\textsf{R}\)</span> calculations directly into text, rather than as code chunk outputs. This is called ‘inline code’. Place an <code>r</code> after the single backtick used to surround an inline code snippet similar to the way we place <code>{r ...}</code> at the start of a chunk. This will cause the snippet to be executed and replaced with its output.</p>
<p>Thus, text such as</p>
<pre><code>The 97.5% percentile for the _t_-distribution with 24 degrees of freedom is `r qt(0.975, 24)`.</code></pre>
<p>renders as</p>
<div class="output panel">
<p>The 97.5% percentile for the <em>t</em>-distribution with 24 degrees of freedom is 2.0638986.</p>
</div>
<p>The code with the inline code block can reference values and objects created in earlier code blocks — this gives you a way to automatically insert calculated values into your text which are updated every time the code and/or the underlying data change.</p>
</div>
<div id="section-the-chunks-as-a-collective-programme" class="section level3">
<h3>The chunks as a collective programme</h3>
<p>Consider all the chunk in a file to be one long script when joined together.</p>
<p>The chunks are run one after the other in sequence when the document is processed.</p>
<p>Changes in state and variables created and modified by earlier chunks are visible to later chunks.</p>
<p>For example consider the following fragment loosely based on a section of the Chapter 1 <em>dplyr</em> tutorial</p>
<pre><code>First we set up our data frame:

```{r create-dataframe, echo=TRUE}
df = data.frame(id=c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;))
```

then we take a sample

```{r take-sample}
dplyr::sample_n(df, 10, replace=TRUE)
```</code></pre>
<p>When we run <em>knitr</em> we get</p>
<div class="output panel">
<p>First we set up our data frame:</p>
</div>
<p>Notice how the code chunks are execute and included in the document depending on the chunk settings and how the second chunk depends on the first chunk. (The first chunk sets up <code>df</code> and the second refers to it.)</p>
</div>
</div>
<div id="section-knitr-in-rstudio" class="section level2">
<h2>Knitr in RStudio</h2>
<p>In RStudio, Rmarkdown documents have a ‘Knit’ button on the toolbar which builds the output document by performing the following steps.</p>
<ul>
<li>format the markdown</li>
<li>run the R code</li>
<li>join everything together into a final document</li>
</ul>
<p>The metadata options control whether we get HTML, PDF, or Microsoft Word files as output.</p>
</div>
<div id="section-document-preparation-workflow" class="section level2">
<h2>Document preparation workflow</h2>
<p>The code and text of our document grow together, informing each other’s development.</p>
<p>Once we finish one we pretty much have finished the other since everything is bundled together.</p>
<p><em>Knitr</em> runs the chunks of code like one big <span class="math inline">\(\textsf{R}\)</span> programme and inserts the output results (and sometimes the input code) into the document</p>
<p>Don’t forget to use <em>add</em> and <em>commit</em> regularly to track your development. When collaborating include <em>push</em> and <em>pull</em> in the mix.</p>
</div>
<div id="section-summary" class="section level2">
<h2>Summary</h2>
<p>This concludes our overview of <em>knitr</em>.</p>
<p>More information is available online at</p>
<ul>
<li><a href="https://rmarkdown.rstudio.com">https://rmarkdown.rstudio.com</a></li>
<li><a href="https://rmarkdown.rstudio.com/authoring_pandoc_markdown.html">https://rmarkdown.rstudio.com/authoring_pandoc_markdown.html</a> 
<script type="application/shiny-prerendered" data-context="server-start">
library(learnr)
library(dplyr)
knitr::opts_chunk$set(echo = FALSE)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = list(id = "au.edu.unsw.hdat.knitr", version = "1.2.2"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
session$onSessionEnded(function() {
        learnr:::session_stop_event(session)
      })
</script>
 <!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/cerulean.min.css"]},{"type":"character","attributes":{},"value":["<style>h1 {font-size: 34px;}\n       h1.title {font-size: 38px;}\n       h2 {font-size: 30px;}\n       h3 {font-size: 24px;}\n       h4 {font-size: 18px;}\n       h5 {font-size: 16px;}\n       h6 {font-size: 12px;}\n       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}\n       pre:not([class]) { background-color: white }<\/style>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-format"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmarkdown/templates/tutorial/resources"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-format.js"]},{"type":"character","attributes":{},"value":["tutorial-format.css","rstudio-theme.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["5.1.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.css","css/v4-shims.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["4.4.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["idb-keyvalue"]},{"type":"character","attributes":{},"value":["3.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/idb-keyval"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["idb-keyval-iife-compat.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54]}},"value":[{"type":"character","attributes":{},"value":["assertthat","base","bslib","compiler","crayon","datasets","DBI","digest","dplyr","ellipsis","evaluate","fansi","fastmap","generics","glue","graphics","grDevices","htmltools","htmlwidgets","httpuv","jquerylib","jsonlite","knitr","later","learnr","lifecycle","magrittr","markdown","methods","mime","pillar","pkgconfig","promises","purrr","R6","Rcpp","rlang","rmarkdown","rprojroot","sass","shiny","stats","stringi","stringr","tibble","tidyselect","tools","utf8","utils","vctrs","withr","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["0.2.1","4.0.3","0.3.1","4.0.3","1.4.2","4.0.3","1.1.2","0.6.29","1.0.7","0.3.2","0.14","1.0.2","1.1.0","0.1.1","1.6.0","4.0.3","4.0.3","0.5.2","1.5.4","1.6.5","0.1.4","1.7.3","1.37","1.3.0","0.10.1","1.0.1","2.0.1","1.1","4.0.3","0.12","1.6.4","2.0.3","1.2.0.1","0.3.4","2.5.1","1.0.7","0.4.12","2.11","2.0.2","0.4.0","1.7.1","4.0.3","1.7.6","1.4.0","3.1.6","1.1.1","4.0.3","1.2.2","4.0.3","0.3.8","2.4.3","0.29","1.8-4","2.2.1"]}]}]}
</script>
<!--/html_preserve--></li>
</ul>
</div>

</div> <!-- topics -->

<div class="topicsContainer">
<div class="topicsPositioner">
<div class="band">
<div class="bandContent topicsListContainer">

<!-- begin doc-metadata -->
<div id="doc-metadata">
<h2 class="title toc-ignore" style="display:none;">Generating dynamic reports with knitr</h2>
</div>
<!-- end doc-metadata -->

</div> <!-- bandContent.topicsListContainer -->
</div> <!-- band -->
</div> <!-- topicsPositioner -->
</div> <!-- topicsContainer -->


</div> <!-- bandContent page -->
</div> <!-- pageContent band -->




<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</body>

</html>
